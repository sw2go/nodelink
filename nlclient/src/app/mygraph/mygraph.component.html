<div class="container-fluid border border-primary" (click)="hideContextMenu()" oncontextmenu="return false;">
  <div *ngIf="contextmenudata!=null">
    <app-context-menu [context]="contextmenudata" ></app-context-menu>
  </div>
  

  <div class="row">

    <div class="col-8 border border-secondary">
      <div  style="height: calc( 100vh - 70px)">
        <ngx-graph class="chart-container"
          [layout]="layout"
          [links]="linkitems"
          [nodes]="nodeitems"
          [update$]="update$"              
          [draggingEnabled]="true"
          [autoCenter]="false"
          (activate)="onClick($event)"            
          [legend]="false">
            
          <!--
              [view]="[800, 800]" bewusst nicht festgelegt -> fÃ¼llt das umgebende div
            (select)="onClick($event)"
          
            (deactivate)="onClick($event)"
            
          
          -->
          <ng-template #defsTemplate>
            <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
              <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
            </svg:marker>
          </ng-template>
          
          
          <ng-template #nodeTemplate let-node>
            <svg:g class="node" (contextmenu)="showContextMenu(node, $event.clientX, $event.clientY)">
              <svg:rect
                [attr.width]="node.dimension.width"
                [attr.height]="node.dimension.height"
                [attr.fill]="node.data.color"
                [attr.stroke]="'black'"
                [attr.stroke-width]="'0'"  
              />
              <svg:text alignment-baseline="central" [attr.x]="10" [attr.y]="node.dimension.height / 2">
                {{node.label}}
              </svg:text>
            </svg:g>              
          </ng-template>

          <ng-template #linkTemplate let-link>
            <svg:g class="edge" (contextmenu)="showContextMenu(link, $event.clientX, $event.clientY)"  >
              <svg:path class="line" stroke-width="2" marker-end="url(#arrow)"></svg:path>
              <svg:text class="edge-label" text-anchor="middle">
                <textPath
                  class="text-path"
                  [attr.href]="'#' + link.id"
                  [style.dominant-baseline]="link.dominantBaseline"
                  startOffset="50%">
                  {{link.label}}
                </textPath>
              </svg:text>
            </svg:g>
          </ng-template>            
        </ngx-graph>
      </div>    
    </div>

    <div class="col-4">
      <div>
          <button type="button" class="btn btn-secondary" (click)="sort()">Relayout</button>
      </div>

      <div *ngIf="current">
          <input #nodeLabel [value]="current.label"> 
          <button (click)="updateNode(nodeLabel.value)">Update</button>         
      </div>
                
    </div>   

  </div>           <!-- row -->
</div>





